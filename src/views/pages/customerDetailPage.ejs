<div class="p-3 border border-0 rounded shadow-sm bg-white">
    <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="text-muted text-uppercase mb-0">Chi tiết khách hàng</h5>
        <a href="/admin/khach-hang/danh-sach" class="btn btn-secondary rounded-pill">
            <i class="fa-solid fa-arrow-left"></i> Quay lại danh sách
        </a>
    </div>

    <hr>

    <% if (customer) { %>
        <div class="row g-4 align-items-start my-4">
            <div class="col text-center">
                <img src="/images/uploads/avatars/<%= customer.User.user_id %>.jpg"
                    alt="Avatar"
                    class="rounded-circle"
                    style="width: 140px; height: 140px; object-fit: cover; border: 2px solid #ccc;"
                    onerror="this.onerror=null; this.src='/images/user.png';">
                <h5 class="mt-3 mb-1"><%= customer.User.name || '' %></h5>
                <small class="text-muted">Mã KH: <%= customer.customer_id %></small>
            </div>

            <div class="col-8">
                <div class="row g-3">
                    <div class="col">
                        <div class="p-3 border rounded bg-light">
                            <i class="fa-solid fa-envelope text-danger me-2"></i>
                            <strong>Email:</strong> <span class="text-dark"><%= customer.User.email || '' %></span>
                        </div>
                    </div>

                    <div class="col">
                        <div class="p-3 border rounded bg-light">
                            <i class="fa-solid fa-phone text-success me-2"></i>
                            <strong>Điện thoại:</strong> <span class="text-dark"><%= customer.User.phone || '' %></span>
                        </div>
                    </div>

                    <div class="col">
                        <div class="p-3 border rounded bg-light">
                            <i class="fa-solid fa-comments text-secondary me-2"></i>
                            <strong>Liên hệ ưa thích:</strong> <span class="text-dark"><%= customer.preferred_contact || '' %></span>
                        </div>
                    </div>

                    <div class="col">
                        <div class="p-3 border rounded bg-light">
                            <i class="fa-solid fa-gift text-info me-2"></i>
                            <strong>Điểm tích lũy:</strong> <span class="text-dark"><%= customer.loyalty_points || 0 %></span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="p-3 border rounded bg-light">
                            <i class="fa-solid fa-location-dot text-warning me-2"></i>
                            <strong>Địa chỉ:</strong> <span class="text-dark"><%= customer.address || 'Chưa cập nhật' %></span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="p-3 border rounded bg-light">
                            <i class="fa-solid fa-cake-candles text-pink me-2"></i>
                            <strong>Ngày sinh:</strong> 
                            <span class="text-dark">
                                <%= customer.date_of_birth ? new Date(customer.date_of_birth).toLocaleDateString('vi-VN') : 'Chưa cập nhật' %>
                            </span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="p-3 border rounded bg-light">
                            <i class="fa-solid fa-clock-rotate-left text-dark me-2"></i>
                            <strong>Hoạt động gần nhất:</strong> 
                            <span class="text-dark">
                                <%= customer.last_active ? new Date(customer.last_active).toLocaleString('vi-VN') : 'Không có' %>
                            </span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="p-3 border rounded bg-light">
                            <i class="fa-solid fa-calendar-plus text-primary me-2"></i>
                            <strong>Ngày tạo:</strong> 
                            <span class="text-dark">
                                <%= customer.createdAt ? new Date(customer.createdAt).toLocaleString('vi-VN') : '' %>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <% } else { %>
        <div class="alert alert-warning mb-0">Không tìm thấy thông tin khách hàng.</div>
    <% } %>
</div>
